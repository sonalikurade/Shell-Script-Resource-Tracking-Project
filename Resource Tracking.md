# AWS Resource Tracker Project Using Shell Scripting
### What does this project do?
By running the AWS Resource Tracker script, users can quickly obtain a list of S3 buckets, EC2 instances, Lambda functions, and IAM users, EBS Volumes, Snapshots associated with their AWS account.

This information can be valuable for various purposes, including auditing, inventory management, resource optimisation, and security assessment.

This shell script is designed to report the AWS resource usage for the current AWS account. It retrieves information about the following AWS resources:

- S3 buckets
- EC2 instances
- Lambda functions
- IAM users
- EBS Volumes
- List of Snapshots

The script generates separate output files for each resource, containing relevant details.

## Step 1: Launch an EC2 instance

- I have created an Ubuntu EC2 instance

## Step 2: Install and set up AWS CLI

- Install and set up AWS CLI with access credentials and default settings for interacting with AWS services from the command line
    ```
    sudo apt-get update
    
    sudo apt  install awscli -y
    
    aws configure
    
- Install JSON utility **jq** to print JSON data in a more readable format.
    ```
    sudo apt  install jq -y
    
## Step 3: Create a shell script file aws_resource_tracker.sh as below

```
#!/bin/bash
########################
# Author: Sonali
# version: v1
# This script will report the AWS resource usage
#######################

set -x # It will put your script in debug mode, showing the executed commands as output.

# AWS resources to track
# AWS S3
# AWS EC2
# AWS Lambda
# AWS IAM Users
# EBS Volumes
# List of Snapshots

# Lists S3 buckets, listing all user-owned buckets
echo "Listing S3 buckets"
aws s3 ls > S3resourceTracker # Redirecting output to a file S3resourceTracker

# Lists EC2 instances available in my account, including running, stopped, and terminated instances
echo "Listing EC2 instances"
#aws ec2 describe-instances
aws ec2 describe-instances | jq '.Reservations[].Instances[].InstanceId' > EC2resourceTracker # Redirecting output to a file EC2resourceTracker, it will give any number of instance IDs which are available

aws ec2 describe-instances --region us-east-1 | grep -i instanceid | awk '{print $2}'
aws ec2 describe-instances --region us-east-2 | grep -i instanceid | awk '{print $2}'

# Lists Lambda functions, displaying a list of all functions for the current user
echo "Listing Lambda Functions"
aws lambda list-functions > LambdaResourceTracker # Redirecting output to a file LambdaResourceTracker

# Lists the IAM users in the current account
echo "Listing IAM Users"
aws iam list-users > IAMUserResourceTracker  # Redirecting output to a file IAMUserResourceTracker

# Lists the EBS Volumes
echo "prints the list of EBS Volumes"
aws ec2 describe-volumes 

# Lists the Snapshots
echo "print list of snapshots"
aws ec2 describe-snapshots
```

## Step 4: Make the shell script file aws_resource_tracker.sh executable

sudo chmod +x aws_resource_tracker.sh

## Step 5: Run the script
```
ubuntu@ip-172-31-32-87:~$ ls

aws_resource_tracker.sh

ubuntu@ip-172-31-32-87:~$ ./aws_resource_tracker.sh

+ echo 'Listing S3 buckets'

Listing S3 buckets

+ aws s3 ls

+ echo 'Listing EC2 instances'

Listing EC2 instances

+ jq '.Reservations[].Instances[].InstanceId'

+ aws ec2 describe-instances

+ echo 'Listing Lambda Functions'

Listing Lambda Functions

+ aws lambda list-functions

+ echo 'Listing IAM Users'

Listing IAM Users

+ aws iam list-users
```

## Step 6: List the files in the current working directory

ubuntu@ip-172-31-32-87:~$ ls
```
EC2resourceTracker  IAMUserResourceTracker  LambdaResourceTracker  S3resourceTracker  aws_resource_tracker.sh
```
## Step 7: Validation

That’s it. You will find Resource Tracker files for EC2 instances(including running, stopped, and terminated instances), IAM Users, Lambda functions, and S3 buckets generated by the shell script. View the files using cat cmd as below.

```
cat EC2resourceTracker S3resourceTracker
```

## Automate Using CRON JOB:

we can schedule this script to run at a particular time daily using CRON Job

## Step1: Creating a Cron Job

Create a cron job using the `crontab` command.

## Step2: Scheduling a Cron Job

I have scheduled a job run at 6 PM every day and added the below cron job :

```
00 18 * * * /home/ubuntu/aws_resource_tracker.sh
```

As evident from the script above, the output of the cron job is saved in the resourceTracker files.

Thanks for reading!